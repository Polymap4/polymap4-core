<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>

<!--
 <copyright>
 </copyright>

 $Id$
-->

<plugin>

   <extension
         point="org.eclipse.ui.views">
      <view
            category="org.polymap.core.project"
            class="org.polymap.core.project.ui.ProjectView"
            icon="icons/eview16/project_view.gif"
            id="org.polymap.core.project.ProjectView"
            name="%views_maps"
            restorable="true">
      </view>
      <view
            category="org.polymap.core.project"
            class="org.polymap.core.project.ui.MapLayersView"
            icon="icons/eview16/layer_view.gif"
            id="org.polymap.core.project.MapLayersView"
            name="%views_layers"
            restorable="true">
      </view>
      <view
            class="org.polymap.core.project.ui.FeatureTableView"
            icon="icons/eview16/table_view.gif"
            id="org.polymap.core.project.FeatureTableView"
            name="%views_sourceFeatureTable"
            restorable="true">
      </view>
   </extension>
   <extension
         point="org.eclipse.ui.perspectiveExtensions">
      <perspectiveExtension
            targetID="org.polymap.core.project.dataPerspective">
         <view
               id="org.polymap.core.project.ProjectView"
               minimized="false"
               relationship="stack"
               visible="true">
         </view>
         <viewShortcut
               id="org.polymap.core.project.ProjectView">
         </viewShortcut>
         <actionSet
               id="org.polymap.core.project.actionSet1">
         </actionSet>
      </perspectiveExtension>
   </extension>
   <extension
         point="org.eclipse.ui.perspectives">
      <perspective
            class="org.polymap.core.project.ui.DataPerspective"
            icon="icons/eview16/project_view.gif"
            id="org.polymap.core.project.dataPerspective"
            name="%perspectives_adhoc">
      </perspective>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            description="%actions_openMap"
            id="org.polymap.core.project.command.openMap"
            name="%actions_openMap">
      </command>
      <command
            description="%actions_addLayerToMap"
            id="org.polymap.core.project.command.addLayerToMap"
            name="%actions_addLayerToMap">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="org.polymap.core.project.actions.AddLayerFromCatalogHandler"
            commandId="org.polymap.core.project.command.addLayerToMap">
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="toolbar:org.polymap.core.project.ProjectView">
         <command
               commandId="org.polymap.core.project.command.openMap"
               icon="icons/obj16/map_obj.gif"
               style="push">
         </command>
      </menuContribution>
      <menuContribution
            locationURI="popup:org.polymap.core.project.ProjectView">
         <command
               commandId="org.polymap.core.project.command.openMap"
               icon="icons/obj16/map_obj.gif"
               style="push">
         </command>
      </menuContribution>
      <menuContribution
            locationURI="popup:net.refractions.udig.catalog.ui.CatalogView">
         <command
               commandId="org.polymap.core.project.command.addLayerToMap"
               icon="icons/etool16/addlayer_wiz.gif"
               style="push">
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.newWizards">
      <category
            id="org.polymap.core.project.ui.newWizardCategory"
            name="%wizards_mapsAndLayers">
      </category>
      <wizard
            canFinishEarly="true"
            category="org.polymap.core.project.ui.newWizardCategory"
            class="org.polymap.core.project.ui.NewMapWizard"
            descriptionImage="icons/wizban/newmap_wiz.gif"
            icon="icons/etool16/newmap_wiz.gif"
            id="org.polymap.core.project.ui.NewMapWizard"
            name="%wizards_newMap">
      </wizard>
      <primaryWizard
            id="org.polymap.core.project.ui.NewMapWizard">
      </primaryWizard>
   </extension>
   <extension
         point="org.eclipse.ui.popupMenus">
      <objectContribution
            adaptable="false"
            id="org.polymap.core.project.layerContribution"
            objectClass="org.polymap.core.project.ILayer">
         <action
               class="org.polymap.core.project.actions.PropertiesAction"
               id="org.polymap.core.project.action.properties"
               label="%actions_properties"
               menubarPath="properties"
               style="push"
               tooltip="%actions_properties">
         </action>
         <action
               class="org.polymap.core.project.actions.PropertyDialogAction"
               id="org.polymap.core.project.action.propertiesDialog"
               label="%actions_propertiesDialog"
               menubarPath="properties"
               style="push"
               tooltip="%actions_propertiesDialog">
         </action>
         <action
               class="org.polymap.core.project.actions.RemoveLayerAction"
               enablesFor="+"
               icon="icons/etool16/delete.gif"
               id="org.polymap.core.project.action.removeLayer"
               label="%actions_deleteLayer"
               style="push"
               tooltip="%actions_deleteLayer">
         </action>
         <action
               class="org.polymap.core.project.actions.FeatureTableAction"
               enablesFor="+"
               icon="icons/eview16/table_view.gif"
               id="org.polymap.core.project.action.tableView"
               label="%actions_showFeatureTable"
               menubarPath="content"
               style="push"
               tooltip="%actions_showFeatureTable_tip">
         </action>
      </objectContribution>
      <objectContribution
            adaptable="false"
            id="org.polymap.core.project.mapContribution"
            objectClass="org.polymap.core.project.IMap">
         <action
               class="org.polymap.core.project.actions.PropertiesAction"
               id="org.polymap.core.project.action.properties"
               label="%actions_properties"
               menubarPath="properties"
               style="push"
               tooltip="%actions_properties">
         </action>
         <action
               class="org.polymap.core.project.actions.PropertyDialogAction"
               id="org.polymap.core.project.action.mapPropertiesDialog"
               label="%actions_propertiesDialog"
               menubarPath="properties"
               style="push"
               tooltip="%actions_propertiesDialog">
         </action>
         <action
               class="org.polymap.core.project.actions.RemoveMapAction"
               enablesFor="+"
               icon="icons/etool16/delete.gif"
               id="org.polymap.core.project.action.removeMap"
               label="%actions_deleteMap"
               style="push"
               tooltip="%actions_deleteMap">
         </action>
      </objectContribution>
   </extension>
   <extension
         point="org.polymap.core.qi4j.moduleAssemblers">
      <assembler
            class="org.polymap.core.project.ProjectRepositoryAssembler">
      </assembler>
   </extension>
   <extension
         point="org.eclipse.ui.decorators">
      <decorator
            adaptable="true"
            class="org.polymap.core.project.ui.EntityModificationDecorator"
            icon="icons/ovr16/write_ovr.gif"
            id="org.polymap.core.project.ui.entityModificationDecorator"
            label="Entity Modification Decorator"
            lightweight="true"
            location="BOTTOM_LEFT"
            state="true">
         <enablement>
            <and>
               <objectClass
                     name="org.polymap.core.model.Entity">
               </objectClass>
            </and>
         </enablement>
      </decorator>
   </extension>
   <!--extension
         point="org.eclipse.ui.actionSets">
      <actionSet
            id="org.polymap.core.project.actions.undoRedo"
            label="Merge/Revert"
            visible="true">
         <action
               class="org.polymap.core.project.actions.MergeChangesAction"
               icon="icons/elcl16/right_co.gif"
               id="org.polymap.core.project.action1"
               label="Merge Changes"
               style="push"
               toolbarPath="undo">
         </action>
         <action
               class="org.polymap.core.project.actions.RevertChangesAction"
               icon="icons/dtool16/delete_edit.gif"
               id="org.polymap.core.project.action2"
               label="Revert Changes"
               style="push"
               toolbarPath="undo">
         </action>
      </actionSet>
   </extension-->
   <extension
         point="org.eclipse.ui.propertyPages">
      <page
            class="org.polymap.core.project.ui.properties.LayerBasePropertiesPage"
            id="org.polymap.core.project.ui.properties.layerBasePropertyPage"
            name="%propertyPage_general">
         <enabledWhen>
            <instanceof
                  value="org.polymap.core.project.ILayer">
            </instanceof>
         </enabledWhen>
      </page>
      <page
            class="org.polymap.core.project.ui.properties.MapBasePropertiesPage"
            id="org.polymap.core.project.ui.properties.mapBasePropertyPage"
            name="%propertyPage_general">
         <enabledWhen>
            <instanceof
                  value="org.polymap.core.project.IMap">
            </instanceof>
         </enabledWhen>
      </page>
   </extension>
   <extension
         point="net.refractions.udig.ui.dropAction">
      <action
            class="org.polymap.core.project.actions.AddLayerToMapDropAction"
            enablesFor="+"
            name="AddLayerToMapDropAction">
         <destination
               class="org.polymap.core.project.ui.ProjectView">
         </destination>
         <acceptedType
               adapt="true"
               class="net.refractions.udig.catalog.IGeoResource">
         </acceptedType>
         <destination
               class="org.polymap.core.project.IMap">
         </destination>
         <destination
               class="org.polymap.core.project.ILayer">
         </destination>
         <destination
               class="org.polymap.core.project.ui.MapLayersView">
         </destination>
      </action>
      <action
            class="org.polymap.core.project.actions.SortLayerDropAction"
            name="SortLayerDropAction">
         <destination
               class="org.polymap.core.project.ui.MapLayersView">
         </destination>
         <acceptedType
               class="org.polymap.core.project.ILayer">
         </acceptedType>
         <destination
               class="org.polymap.core.project.ILayer">
         </destination>
      </action>
   </extension>

</plugin>
